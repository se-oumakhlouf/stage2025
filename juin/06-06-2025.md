## âœ… TÃ¢ches effectuÃ©es

#### ğŸ” Change-password (Culture) :

- Correction dâ€™un bug : les noms des champs entre le front (`id`) et le back (`ldapId`) Ã©taient incohÃ©rents, ce qui entraÃ®nait une valeur `null` cÃ´tÃ© backend.
    
- Mise en place dâ€™un **code de confirmation Ã  8 chiffres**, avec validation stricte (longueur exacte + chiffres uniquement).
    
- Ajout de **messages dâ€™erreur prÃ©cis et traduits** (dans `fr.json`), notamment :
    
    - Code invalide
        
    - Ancien mot de passe incorrect
        
- Ajout de **messages dâ€™aide et de placeholder** dans le formulaire Angular.
    
- Utilisation du **pipe `translate`** pour lâ€™internationalisation (franÃ§ais / anglais).
    

---

## ğŸ“š Connaissances acquises

#### ğŸ” Change-password (Culture) :

- Utilisation du pipe `translate` de `ngx-translate` pour afficher les textes selon la langue active.
    
- Le choix de la langue (`fr.json`, `en.json`, etc.) se fait manuellement via `translate.use(...)` dans Angular.
    
- VÃ©rification de champ personnalisÃ©e (`Validator`) en Angular avec gestion combinÃ©e de la touche (`touched`) + dÃ©lais dâ€™inactivitÃ©.
    

---

## ğŸ ProblÃ¨mes rencontrÃ©s

#### ğŸ” Change-password (Culture) :

- La vÃ©rification de lâ€™ancien mot de passe via lâ€™Active Directory ne fonctionne pas encore : lâ€™utilisateur est bien trouvÃ©, mais lâ€™authentification Ã©choue (probablement liÃ© Ã  la mÃ©thode ou au bind LDAP).
    

---

## ğŸ”œ Ã€ faire demain

#### ğŸ” Change-password (Culture) :

- Finaliser la vÃ©rification du mot de passe avec lâ€™AD (authentification cÃ´tÃ© back).
    
- ImplÃ©menter un **batch** pour identifier les utilisateurs dont le mot de passe doit Ãªtre mis Ã  jour.
    

---

## ğŸ§© Notes techniques

`fr.json`
```json
"OLD_PASSWORD_PLACEHOLDER": "Entrez l'ancien mot de passe",  
"OLD_PASSWORD_REQUIRED": "L'ancien mot de passe est obligatoire",  
"OLD_PASSWORD_LABEL": "Ancien mot de passe",  
"NEW_PASSWORD_PLACEHOLDER": "Entrez le nouveau mot de passe",  
"CODE_LABEL": "Code Ã  8 chiffres",  
"CODE_PLACEHOLDER": "Entrez le code Ã  8 chiffres",  
"CODE_REQUIRED": "Le code reÃ§u par mail est obligatoire",  
"CODE_LENGTH": "Le code doit comporter exactement 8 chiffres"

``` 

`password-change-request.component.html`
```html
<mat-form-field appearance="fill" class="full-width mat-form-field-new-password">  
  <mat-label>{{ 'COMPONENTS.CHANGE_PASSWORD_REQUEST.CODE_LABEL' | translate }}</mat-label>  
  <input formControlName="confirmationCode" matInput  
         placeholder="{{ 'COMPONENTS.CHANGE_PASSWORD_REQUEST.CODE_PLACEHOLDER' | translate }}"  
         type="text">  

  <mat-error *ngIf="confirmationCode.touched && confirmationCode.hasError('required')">  
    {{ 'COMPONENTS.CHANGE_PASSWORD_REQUEST.CODE_REQUIRED' | translate }}  
  </mat-error>  

  <mat-error *ngIf="confirmationCode.touched && !confirmationCode.hasError('required') && confirmationCode.hasError('invalidCode')">  
    {{ 'COMPONENTS.CHANGE_PASSWORD_REQUEST.CODE_LENGTH' | translate }}  
  </mat-error>  
</mat-form-field>

```

`password-change-request.component.ts`
```ts
this.passwordChangeForm = this.fb.group(  
    {  
        oldPassword: ['', Validators.required],  
        newPassword: ['', [Validators.required, this.passwordValidator]],  
        confirmPassword: ['', [Validators.required]],  
        confirmationCode: ['', [Validators.required, this.codeValidator]],  
    },  
    {validator: this.passwordsMatch}  
);


codeValidator(control: any) {  
    const value = control.value || '';  
    const length = value.length;  
    if (length !== 8) {  
        return {invalidCode: true};  
    }  
  
    const isNumeric = /^\d{8}/.test(value);  
    if (!isNumeric) {  
        return {invalidCode: true};  
    }  
    return null;  
}
```
