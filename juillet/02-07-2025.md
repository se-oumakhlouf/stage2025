## ‚úÖ T√¢ches effectu√©es

- R√©solution de "`l'incoh√©rence de donn√©es d'hier`" -> en test les `links` sont g√©n√©r√©s avec des dates al√©atoires, au lancement et tout les `X` temps, on reset l'activit√© des `links` qui n'ont pas √©t√© reset depuis `Y` temps par la suppression des `Meeting`
	
- Modification de la table `Mails` pour permettre une meilleure gestions des envois et des retry sur les fails
	
- Bugfix : les erreurs dans `user-form` renvoient √† pr√©sent vers l'`errorHandler`
	
- Modification du select pour r√©cup√©rer les `MailRequest` en status `FAILED` pour ne r√©cup√©rer que les request avec un `retryCounter` < `maxRetries` (√©tant param√©trable depuis `app.yml`)
	
- Cr√©ation de m√©thode dans `LinkService` pour centraliser la gestions des `Link`
	
- Optimisation avec utilisation de `saveAll` √† la place de `save`
	

---

## üìö Connaissances acquises

- `saveAll` est plus performant que `save`
	

---

## üêû Probl√®mes rencontr√©s

- Les mails envoy√©s sont dans la langue du `Meeting` et non dans la langue de l'utilisateur. Il faudrait r√©introduire un champ `Language` dans la table des `MailRequest` correspondant √† la langue de l'utilisateur pour contruire le body en fonction de cette langue et non celle du `Meeting`
	

---

## üîú √Ä faire demain

- 
	

---

## üß© Notes / Code

```java
@Transactional  
public OrganizeMeetingsStatus organizeMeetings () {  
 // ... 
  List<Meeting> meetingsToSave = new ArrayList<>();  
  
  for (int i = 0; i < users.size(); i++) {  
    if (availableLinks.isEmpty()) {  
      // ...
    }  
  
   // ... 
  
    for (int j = i + 1; j < users.size(); j++) {  
      // ...
      Link link = availableLinks.removeFirst();  
      linkService.markAsReserved(link);  
      usedLinks.add(link);  
      meeting.setMeetingLink(link);  
  
      meetingsToSave.add(meeting);  
	  // ..
      meetingsAdded++;  
      break;  
    }  
  }  
  linkService.updateAllNewReservedLinks(usedLinks);  
  meetingRepository.saveAll(meetingsToSave);  
  
  // ... 
}
```

```java
@Transactional  
public void updateAllNewReservedLinks(Iterable<Link> links) {  
  linkRepository.saveAll(links);  
}
```
